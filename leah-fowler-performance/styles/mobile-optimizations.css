/* Mobile-First Typography Optimizations */

/* Base font size for excellent readability on mobile */
@media (max-width: 768px) {
  :root {
    /* Minimum 16px base to prevent zoom on iOS */
    font-size: 16px;

    /* Optimal line height for mobile reading */
    --line-height-tight: 1.3;
    --line-height-normal: 1.6;
    --line-height-relaxed: 1.8;

    /* Touch target minimums */
    --min-touch-target: 48px;
    --min-touch-spacing: 8px;
  }

  /* Prevent iOS zoom on form inputs */
  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="number"],
  input[type="password"],
  input[type="date"],
  input[type="datetime-local"],
  input[type="month"],
  input[type="search"],
  input[type="time"],
  input[type="url"],
  input[type="week"],
  select,
  textarea {
    font-size: 16px !important;
  }

  /* Optimized typography for parent age group (35-45) */
  body {
    font-size: 16px;
    line-height: 1.6;
    letter-spacing: 0.01em;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  /* Headings with better mobile scaling */
  h1 {
    font-size: clamp(1.875rem, 5vw + 1rem, 2.5rem);
    line-height: 1.2;
    letter-spacing: -0.02em;
  }

  h2 {
    font-size: clamp(1.5rem, 4vw + 0.5rem, 2rem);
    line-height: 1.3;
    letter-spacing: -0.01em;
  }

  h3 {
    font-size: clamp(1.25rem, 3vw + 0.25rem, 1.5rem);
    line-height: 1.4;
  }

  h4 {
    font-size: clamp(1.125rem, 2vw + 0.25rem, 1.25rem);
    line-height: 1.4;
  }

  /* Paragraph optimization for mobile reading */
  p {
    font-size: 16px;
    line-height: 1.6;
    margin-bottom: 1rem;
  }

  /* Links and buttons with proper touch targets */
  a,
  button,
  .btn,
  [role="button"] {
    min-height: 48px;
    min-width: 48px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 12px 16px;
    touch-action: manipulation;
  }

  /* Ensure clickable areas are thumb-friendly */
  .touch-target {
    position: relative;
    min-height: 48px;
    min-width: 48px;
  }

  /* Add padding to clickable elements that might be too small */
  .touch-target::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: max(100%, 48px);
    height: max(100%, 48px);
  }
}

/* Mobile-specific viewport adjustments */
@media (max-width: 390px) {
  /* iPhone 14/15 specific optimizations */
  .container {
    padding-left: 16px;
    padding-right: 16px;
  }
}

@media (max-width: 412px) {
  /* Samsung Galaxy specific optimizations */
  .container {
    padding-left: 16px;
    padding-right: 16px;
  }
}

@media (max-width: 428px) {
  /* iPhone Pro Max specific optimizations */
  body {
    font-size: 17px; /* Slightly larger for bigger screens */
  }
}

/* Tablet optimizations */
@media (min-width: 768px) and (max-width: 1024px) {
  :root {
    font-size: 18px;
  }

  body {
    font-size: 18px;
    line-height: 1.6;
  }
}

/* Accessibility improvements for mobile */
@media (max-width: 768px) {
  /* High contrast mode support */
  @media (prefers-contrast: high) {
    body {
      font-weight: 500;
    }

    h1, h2, h3, h4, h5, h6 {
      font-weight: 700;
    }
  }

  /* Reduced motion for users who prefer it */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
}

/* Form optimizations for mobile */
@media (max-width: 768px) {
  /* Large, thumb-friendly form inputs */
  input,
  textarea,
  select {
    min-height: 56px;
    padding: 16px;
    font-size: 16px;
    border-radius: 12px;
    border-width: 2px;
  }

  /* Proper spacing between form fields */
  .form-group {
    margin-bottom: 24px;
  }

  /* Labels that are easy to read */
  label {
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 8px;
    display: block;
  }

  /* Error messages that stand out */
  .error-message {
    font-size: 14px;
    color: #dc2626;
    margin-top: 4px;
    font-weight: 500;
  }

  /* Success messages */
  .success-message {
    font-size: 14px;
    color: #059669;
    margin-top: 4px;
    font-weight: 500;
  }
}

/* Performance optimizations */
@media (max-width: 768px) {
  /* Contain layout for better performance */
  .card,
  .programme-card,
  .testimonial-card {
    contain: layout style;
  }

  /* GPU acceleration for animations */
  .swipeable,
  .animated {
    transform: translateZ(0);
    will-change: transform;
  }

  /* Optimize image rendering */
  img {
    content-visibility: auto;
  }
}

/* Safe area insets for modern phones */
@supports (padding: max(0px)) {
  .safe-top {
    padding-top: max(1rem, env(safe-area-inset-top));
  }

  .safe-bottom {
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }

  .safe-left {
    padding-left: max(1rem, env(safe-area-inset-left));
  }

  .safe-right {
    padding-right: max(1rem, env(safe-area-inset-right));
  }
}

/* Bottom navigation spacing */
@media (max-width: 768px) {
  /* Add padding to account for bottom nav */
  main,
  .page-content {
    padding-bottom: calc(80px + env(safe-area-inset-bottom));
  }

  /* Fixed elements should account for safe areas */
  .bottom-nav {
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* Utility classes for mobile */
@media (max-width: 768px) {
  /* Hide scrollbars but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Horizontal scroll container */
  .scroll-x {
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
  }

  /* Snap scrolling for carousels */
  .snap-x {
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
  }

  .snap-center {
    scroll-snap-align: center;
  }

  .snap-start {
    scroll-snap-align: start;
  }

  /* Prevent text selection on interactive elements */
  .no-select {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  /* Tap highlight color */
  .tap-highlight-transparent {
    -webkit-tap-highlight-color: transparent;
  }
}

/* Loading states for mobile */
@media (max-width: 768px) {
  .skeleton {
    animation: skeleton-loading 1.5s infinite ease-in-out;
  }

  @keyframes skeleton-loading {
    0% {
      background-color: hsl(200, 20%, 90%);
    }
    50% {
      background-color: hsl(200, 20%, 95%);
    }
    100% {
      background-color: hsl(200, 20%, 90%);
    }
  }
}

/* Print styles to save data/battery */
@media print {
  .no-print,
  .bottom-nav,
  .mobile-nav,
  video,
  iframe {
    display: none !important;
  }
}