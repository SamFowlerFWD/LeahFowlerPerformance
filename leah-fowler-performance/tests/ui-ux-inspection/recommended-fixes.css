/* ===================================
   UI/UX FIXES - IMMEDIATE APPLICATION
   =================================== */

/* 1. PREVENT HORIZONTAL SCROLL */
html, body {
  overflow-x: hidden;
  max-width: 100vw;
  position: relative;
}

/* 2. CONTAINER CONSTRAINTS */
.container,
[class*="container"] {
  width: 100%;
  max-width: min(100%, 1440px);
  margin-left: auto;
  margin-right: auto;
  padding-left: clamp(1rem, 5vw, 2rem);
  padding-right: clamp(1rem, 5vw, 2rem);
  box-sizing: border-box;
}

/* 3. MINIMUM TOUCH TARGET SIZES */
button,
a[role="button"],
input[type="button"],
input[type="submit"],
input[type="reset"],
.btn,
[class*="button"] {
  min-height: 44px !important;
  min-width: 44px !important;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  touch-action: manipulation;
  position: relative;
}

/* Adjust for desktop */
@media (min-width: 1024px) and (pointer: fine) {
  button,
  a[role="button"],
  .btn {
    min-height: 40px !important;
  }
}

/* 4. STANDARDISED PADDING SYSTEM */
.p-xs { padding: 0.5rem !important; }
.p-sm { padding: 1rem !important; }
.p-md { padding: 1.5rem !important; }
.p-lg { padding: 2rem !important; }
.p-xl { padding: 3rem !important; }

.py-xs { padding-top: 0.5rem !important; padding-bottom: 0.5rem !important; }
.py-sm { padding-top: 1rem !important; padding-bottom: 1rem !important; }
.py-md { padding-top: 1.5rem !important; padding-bottom: 1.5rem !important; }
.py-lg { padding-top: 2rem !important; padding-bottom: 2rem !important; }
.py-xl { padding-top: 3rem !important; padding-bottom: 3rem !important; }

.px-xs { padding-left: 0.5rem !important; padding-right: 0.5rem !important; }
.px-sm { padding-left: 1rem !important; padding-right: 1rem !important; }
.px-md { padding-left: 1.5rem !important; padding-right: 1.5rem !important; }
.px-lg { padding-left: 2rem !important; padding-right: 2rem !important; }
.px-xl { padding-left: 3rem !important; padding-right: 3rem !important; }

/* 5. Z-INDEX HIERARCHY */
.z-base { z-index: 0 !important; }
.z-dropdown { z-index: 100 !important; }
.z-sticky { z-index: 200 !important; }
.z-fixed { z-index: 300 !important; }
.z-modal-backdrop { z-index: 400 !important; }
.z-modal { z-index: 500 !important; }
.z-popover { z-index: 600 !important; }
.z-tooltip { z-index: 700 !important; }
.z-notification { z-index: 800 !important; }

/* Apply to specific components */
header,
[class*="header"] {
  z-index: 200;
}

[class*="mobile-dock"],
[class*="bottom-nav"] {
  z-index: 300;
}

[class*="modal"],
[class*="dialog"] {
  z-index: 500;
}

[class*="popup"],
[class*="exit-intent"] {
  z-index: 600;
}

/* 6. IMPROVED FOCUS INDICATORS */
*:focus-visible {
  outline: 3px solid #b88a54 !important;
  outline-offset: 2px !important;
  border-radius: 4px;
  transition: outline-offset 0.2s ease;
}

*:focus:not(:focus-visible) {
  outline: none;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  *:focus-visible {
    outline-width: 4px !important;
    outline-color: currentColor !important;
  }
}

/* 7. SAFE AREA SPACING (iOS) */
.mobile-dock,
.bottom-nav,
[class*="fixed bottom"] {
  padding-bottom: env(safe-area-inset-bottom, 20px);
}

/* 8. RESPONSIVE GRID FIXES */
.grid,
[class*="grid"] {
  gap: clamp(1rem, 3vw, 1.5rem);
}

/* Prevent grid overflow */
.grid > *,
[class*="grid"] > * {
  min-width: 0;
  overflow-wrap: break-word;
}

/* 9. TEXT READABILITY IMPROVEMENTS */
p,
.text-base,
[class*="text-content"] {
  text-align: left !important; /* Never justify */
  line-height: 1.6;
  max-width: 65ch; /* Optimal reading length */
}

/* 10. COLOUR CONTRAST FIXES */
:root {
  /* WCAG AA Compliant colours */
  --color-gold: #b88a54;      /* Darkened for contrast */
  --color-sage: #6b8557;      /* Darkened for contrast */
  --color-navy: #0f1b2e;      /* Darkened for contrast */
  --color-text: #1a1a1a;     /* High contrast text */
  --color-text-light: #4a4a4a; /* Still meets AA */
}

/* Apply to problematic elements */
.text-gold { color: #b88a54 !important; }
.text-sage { color: #6b8557 !important; }
.bg-navy { background-color: #0f1b2e !important; }

/* 11. MOBILE-SPECIFIC FIXES */
@media (max-width: 767px) {
  /* Prevent text truncation */
  button,
  .btn {
    white-space: normal;
    text-overflow: clip;
  }

  /* Ensure proper spacing */
  section {
    padding-top: clamp(2rem, 8vw, 3rem);
    padding-bottom: clamp(2rem, 8vw, 3rem);
  }

  /* Fix header height */
  header {
    height: auto;
    min-height: 60px;
    max-height: 80px;
  }

  /* Prevent content hiding under fixed elements */
  main {
    padding-bottom: calc(80px + env(safe-area-inset-bottom, 0px));
  }
}

/* 12. TABLET-SPECIFIC FIXES */
@media (min-width: 768px) and (max-width: 1023px) {
  /* Better grid transitions */
  .grid-cols-1,
  .md\:grid-cols-2 {
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  }
}

/* 13. DESKTOP MAX-WIDTH CONSTRAINTS */
@media (min-width: 1440px) {
  /* Prevent excessive width */
  .max-w-full {
    max-width: 1440px;
    margin-left: auto;
    margin-right: auto;
  }

  /* Center ultra-wide content */
  body > * {
    max-width: 1920px;
    margin-left: auto;
    margin-right: auto;
  }
}

/* 14. FORM INPUT IMPROVEMENTS */
input,
textarea,
select {
  min-height: 44px;
  padding: 0.75rem;
  font-size: 16px; /* Prevents zoom on iOS */
}

/* 15. IMAGE OVERFLOW PREVENTION */
img,
video,
iframe {
  max-width: 100%;
  height: auto;
  display: block;
}

/* 16. FLEX/GRID ALIGNMENT FIXES */
.flex,
[class*="flex"] {
  align-items: flex-start; /* Prevent stretch issues */
}

.items-center {
  align-items: center !important;
}

.items-stretch {
  align-items: stretch !important;
}

/* 17. CARD CONSISTENCY */
.card,
[class*="card"] {
  padding: clamp(1rem, 3vw, 1.5rem);
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* 18. SECTION SPACING STANDARDISATION */
section {
  padding-top: clamp(3rem, 8vw, 5rem);
  padding-bottom: clamp(3rem, 8vw, 5rem);
}

section + section {
  padding-top: clamp(2rem, 6vw, 4rem);
}

/* 19. PREVENT LAYOUT SHIFT */
[class*="aspect-"] {
  position: relative;
  overflow: hidden;
}

[class*="aspect-"] > img {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* 20. ACCESSIBILITY ENHANCEMENTS */
.sr-only:not(:focus):not(:active) {
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}

/* Visible on focus for keyboard users */
.sr-only-focusable:focus {
  position: static;
  width: auto;
  height: auto;
  clip: auto;
  clip-path: none;
  white-space: normal;
  overflow: visible;
}